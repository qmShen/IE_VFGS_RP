\section{Experimental Evaluation}\label{sec:exp}
We evaluate our techniques on two real-world trajectory datasets: \pt{} and \sz{}.
\pt{}~\cite{pt} contains a total of 2.39 million taxi trajectories and 75.67 million of GPS points, and the longest trajectory has 3,490 GPS points.
\sz{}~\cite{sz} consists of 3.07 million taxi trajectories with 53.53 million GPS points, and the longest trajectory has 2,268 GPS points. All experiments are conducted on a machine with an Intel i7-8700 CPU, 24 GB memory and an NVIDIA GeForce GTX1080 GPU with 8 GB on-chip memory, running on Windows 10. All methods are implemented in Java 1.8, and the Processing 3 library~\cite{p3} is used for rendering. All datasets and source codes required to reproduce our results are available at~\cite{code}.

%\REPORT{
This section is organized as follows.
In Section~\ref{sec:case}, we present several case studies of the visualization results on the \pt{} and \sz{} datasets to demonstrate the merits of our methods.
% In Section~\ref{sec:case}, we evaluate the effectiveness of our proposal by the case studies on \pt{} and \sz{} trajectory dataset, respectively.
%}
In Section~\ref{sec:user}, we conduct a comprehensive user study to test the effectiveness of our visualization results on practical  tasks including \textit{region center identification}, \textit{reachable route inspection} and \textit{traffic flow comparison}. In Section~\ref{sec:quality}, we quantitatively evaluate the fidelity loss and efficiency of our methods.

% and has been cleaned for further analysis.
\trim \trim

\subsection{Case studies}
\subsubsection{Effectiveness of overview}\label{sec:case}

\begin{figure*}[t]
	\centering
	\includegraphics[width=0.95\textwidth]{pictures/experiment_study/case_study_overview.pdf}
	\vspace{-3mm}
	\caption{Effectiveness studies of $\avats$ at overview visualization in \pt{}.}
	\label{fig:overview}
	\vspace{-2mm}
\end{figure*}


We conduct case study in \pt{}, shown as the visualization results in Figure~\ref{fig:overview}, to demonstrate the effectiveness our proposals from the following aspects.


\stitle{Consistently good visual fidelity at overview}
At zoom level 11, Figure~\ref{fig:overview}(A) is the visualization result of the full \pt{} dataset.
With a sampling rate $\alpha \!=\! 1\%$, Figures~\ref{fig:overview}(B) and (C) are the visualizations produced by uniform random sampling ($\rand$), distance based sampling (\ref{}),   
and our visual quality-guaranteed sampling method ($\avats$, \QM{Algorithm~\ref{alg:plus}}), respectively. Comparing with Figure~\ref{fig:overview}(B) and (C), it is obvious that Figure~\ref{fig:overview}(E) is more similar to Figure~\ref{fig:overview}(A). In particular, Figure~\ref{fig:overview}(E) not only preserves the overall visual structure of the entire region but also keeps the details of cities that are far from the center (marked by the dashed cycles in the figure). However, the details of these cities are lost in Figure~\ref{fig:overview}(C) as $\rand{}$ mostly preserve trajectories in the dense region. \QM{On the other sides, the distance based sampling keeps the trajectories in the sparse regions but cannot guarantee visual quality.} 

\stitle{Consistently good visual fidelity under different sampling rates}
Figures~\ref{fig:overview}(D) and (E) are the visualizations produced by $\avats{}$ with a sampling rate of $0.1\%$ and $1\%$. We can make two observations: (i) the larger the sampling rate, the better the visual fidelity, i.e., Figures~\ref{fig:overview}(C) and (E) are more similar to Figure~\ref{fig:overview}(A) compared with Figures~\ref{fig:overview}(B) and (D); (ii) the visualization of $\avats$ with a sampling rate of $0.1\%$ (i.e., Figure~\ref{fig:overview}(D)) looks even more appealing than the visualization of $\rand{}$ with a sampling rate of $1\%$ (i.e., Figure~\ref{fig:overview}(C)) as Figure~\ref{fig:teaser}(D) better captures the overall visual structure of Figure~\ref{fig:overview}(A).

%Figures~\ref{fig:teaser}(D) and (E) are the visualizations produced by $\rand{}$ with a sampling rate of $0.1\%$ and $1\%$, respectively, while Figures~\ref{fig:teaser}(D) and (E) are the visualizations generated by our $\avats{}$ algorithm at the same sampling rates. We can make two observations: (i) the larger the sampling rate, the better the visual fidelity, i.e., Figures~\ref{fig:teaser}(C) and (E) are more similar to Figure~\ref{fig:teaser}(A) compared with Figures~\ref{fig:teaser}(B) and (D); (ii) the visualization of $\avats$ with a sampling rate of $0.1\%$ (i.e., Figure~\ref{fig:teaser}(D)) looks even more appealing than the visualization of $\rand{}$ with a sampling rate of $1\%$ (i.e., Figure~\ref{fig:teaser}(C)) as Figure~\ref{fig:teaser}(D) better captures the overall visual structure of Figure~\ref{fig:teaser}(A).

\stitle{Color encoding effectively mitigates visual clutter}
% Then, we present the superiority of the color encoding scheme in $\avats$, which denotes as $\cavats$ in subsequent sections.
At a zoom level of 11 and with a sampling rate of $1\%$, Figures~\ref{fig:overview}(E) and (F) are the visualizations produced our $\avats$ and $\cavats$ (i.e., $\avats$ with color encoding), respectively.
Visual clutter is severe for the full dataset (i.e., Figure~\ref{fig:overview}(A)) and Figures~\ref{fig:overview}(E) since almost all pixels in the center regions are colored, and it is difficult to identify patterns in the these regions. The visualization of $\cavats$ in Figure~\ref{fig:overview}(F) migrate this problem by encoding the trajectories with color, and thus it is easy to identify some prominent trajectories and busy routes. 


\subsubsection{Case Studies on the effectiveness of detail view}\label{sec:detail}
We next present the effectiveness of our proposals with detail views by investigating three regions of interest in \pt{}, as R1, R2, and R3 shown in Fig.~\ref{fig:porto}(A).

\stitle{Sparse region R1}
R1 is a sparse region and has few trajectories, as the visualization result of full \pt{} dataset shown in Fig.~\ref{fig:porto}(B1).
The reason is the two cities Paredes and Penafiel in R1 are far away from the center of Porto.
Given sampling rate $\alpha=0.5\%$, Fig.~\ref{fig:porto}(B2), (B3) and (B4) are the visualization results of the returning trajectory set from $\rand{}$, $\vats$ and $\avats$ with $\delta=64$, respectively.
As our above statement, the result of $\rand$ almost misses all information in sparse region.
While $\vats$ performs much better than $\rand$ as it provides theoretical visual fidelity guarantee, but it still lost detail information.
Taking Fig.~\ref{fig:porto}(B1) as reference, the trajectory bundle and trajectory structure are lost in Fig.~\ref{fig:porto}(B3$a$) and (B3$b$).
As expected, our advanced approach $\avats$ in Fig.~\ref{fig:porto}(B4) with perception tolerance value $\delta=64$ did an excellent job to capture the details in the full dataset when comparing with $\vats$ in Fig.~\ref{fig:porto}(B3).
As shown in Fig.~\ref{fig:porto}(B4$b$), the trajectory sketch of Penafiel is almost the same as it in Fig.~\ref{fig:porto}(B1$b$), the visualized result of full dataset.


\stitle{Median region R2} It is near to the center of Porto, which has more taxi trajectories than R1, see Fig.~\ref{fig:porto}(A).
As noted in Fig.~\ref{fig:porto}(C1), R2 includes three cities: Ermesinde, Rio Tinto and Valongo.
Fig.~\ref{fig:porto}(C2) and (C3) visualized the returning result of $\avats$ with perception tolerance value $\delta=4$ and $64$, respectively.
Visually, Fig.~\ref{fig:porto}(C3) has more trajectory branch details than Fig.~\ref{fig:porto}(C2), as the rectangles $c$ and $d$ shown in them.
%It shows that the larger perception tolerance value, the more details in this region reserved at zoom level 14.
%Comparing with Fig.~\ref{fig:porto}(C3),
Fig.~\ref{fig:porto}(C4) is the result of $\cavats$, i.e., it colors the trajectories by their representativeness.
Intuitively, Fig.~\ref{fig:porto}(C4) shows its superiority over Fig.~\ref{fig:porto}(C3) to capture the trajectory distributions.
For example, the color of the region $f$ in Fig.~\ref{fig:porto}(C4) is {darker} than the rest two regions $e$ and $g$.
Thus, we can conclude Rio Tinto (region $f$) has more taxi trajectories than other two cities, which is hard to be concluded via Fig.~\ref{fig:porto}(C3), even Fig.~\ref{fig:porto}(C1), the visualization result of full dataset.
It verified that the color encoding scheme could enrich the visual information in large trajectory visualization.

\stitle{Dense region R3} It is the center of Porto, which has the highest concentration of the trajectories and causes serious visual clutter, as visualized in Fig.~\ref{fig:porto}(D1).
For example, the structure of trajectories in Fig.~\ref{fig:porto}(D1$i$) is unclear.
$\avats$ with $\delta=4$ alleviates the visual clutter and preserves the trajectory distribution, see Fig.~\ref{fig:porto}(D2).
Fig.~\ref{fig:porto}(D3) visualized the result of $\avats$ with $\delta=64$, which enhances the visual fidelity of Fig.~\ref{fig:porto}(D2).
Specifically, it preserves more details (see rectangle $h$) and has a more clear structure in the {densest} region (see rectangle $i$).
Visually, Fig.~\ref{fig:porto}(D4) is the best among these four visualization results.
It confirms the advantages of color encoding scheme in $\cavats$.


\input{sections/Evaluation_user_study.tex}
